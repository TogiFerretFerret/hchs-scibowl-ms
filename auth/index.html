<!DOCTYPE html>
<html>
  <head>
    
  </head>
  <body>
        <button id="sin">Sign In</button>
    <button id="sou">Sign Out</button>
  <script src="./fbdt.js"></script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
    import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth(app);
    
    async function signIn() {
      var email = prompt("Email");
      var password = prompt("Password");
      signInWithEmailAndPassword(auth, email, password)
      .then((userCredential) => {
        // Signed In
        const user = userCredential.user;
        console.log(user);
        console.log("Yayz");
        // location.redirect("/auth/dash");
      })
      .catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message;
        console.log(errorCode);
        console.log(errorMessage);
      });
    }
    async function signOut() {
      const nauth = getAuth(app);
      signOut(nauth).then(() => {
        console.log("Successful Signout");
        console.log(nauth);
        // location.replace("/auth/dash");
    }).catch((error) => {
        console.log("error");
        console.log(error);
    });
    }
    onAuthStateChanged(auth, user => {
    if (user) {
      // User is signed in.
      console.log(user);
      console.log("y");
    } else {
      // No user is signed in.
      alert("Not Logged In!");
      location.replace("/");
    }
    })
    document.getElementById("sin").addEventListener("click", signIn);
    document.getElementById("sou").addEventListener("click", signOut);
  </script>

  </body>
</html>
